<div class="container" style="background-color:white;">
  <br>
  <div class="text-center">
    <h1>Factura</h1>
  </div>

  <br>

  <div class="row">
    <div class="col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <!-- <h3 class="panel-title">Cabecera</h3> -->

          <div class="row">

            <div class="col-md-5">
              <div class="form-group">
                <label for="cliente" class="col-sm-2 control-label">Cliente</label>
                <div class="row">
                  <div class="col-md-10">
                    <input class="form-control" id="cliente" placeholder="cliente" type="text" [ngModelOptions]="{standalone: true}"
                    [(ngModel)]="clientSeleccionado.first_name">
                  </div>
                  <div class="col-md-2">
                    <button type="button" class="btn"><i class="fa fa-plus-square" data-toggle="modal" data-target="#seleccionarClienteLabel"></i> </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-5">
              <div class="form-group">
                <label for="fecha" class="col-sm-5 control-label">Fecha factura</label>

                <input class="form-control" id="fecha" [ngModelOptions]="{standalone: true}"
                [(ngModel)]="bill.doc_date" placeholder="fecha factura" type="date">

              </div>
            </div>
            <div class="col-md-2 target">
              <div class="form-group">
                <label for="id" class="col-sm-3 control-label">#</label>

                <input class="form-control" id="id" type="text">

              </div>
            </div>
          </div> <!-- row -->
          <br>

          <!-- <div class="row">
          <div class="col-md-6">
            <address>
              <strong class="">BERNARDO GINARD PRATS</strong><br class="">
              Carrer Ciutadella nº 26 A<br class="">
              07008 Palma<br class="">
              Illes Balears<br class="">
            </address>
          </div>
        </div>
      </div> -->


          <div class="panel-body">

            <h3 class="panel-title">Detalle Item</h3>

            <div class="row">

              <div class="col-4">
                <input class="form-control" id="cliente" placeholder="Producto" [(ngModel)]="producto.nombre" type="text">
              </div>
              <button type="button" class="btn" data-toggle="modal" data-target="#productosModal"><i
                  class="fa fa-plus-square"></i> </button>
              <div class="col-2">
                <input class="form-control" id="fecha" placeholder="Cant."  [(ngModel)]="item.quantity" type="number">
              </div>
              <div class="col-2">
                <input class="form-control" id="valor" placeholder="Valor c/u" [(ngModel)]="item.unit_value" type="number">
              </div>
              <div class="col-2">
                <input class="form-control" id="total" placeholder="Valor Total" [(ngModel)]="item.item_value" type="number">
              </div>
              <button type="button" (click)="CreateItem()" class="btn btn-success"> Agregar</button>


            </div>

            <br>
            <br>
            <h3 class="panel-title">Detalle</h3>

            <table class="table table-condensed" *ngIf="items.length > 0">
                <table class="table table-striped table-bordered" [mfData]="items | search : Search : productos[0]"
                  #mf="mfDataTable" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th class="text-center" scope="col">Producto</th>
                      <th class="text-center" scope="col">Cantidad</th>
                      <th class="text-center" scope="col">Precio unitario</th>
                      <th class="text-center" scope="col">Total</th>
                     
                     
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of mf.data; let i = index">
                      <th class="text-center" scope="row">{{ i+1 }}</th>
                      <td class="text-center">{{item.nombre }}</td>
                      <td class="text-center">{{item.precio }}</td>
                      <td class="text-center">
                        <button type="button" data-dismiss="modal" class="btn btn-secondary fa fa-plus-square" data-toggle="modal"
                          (click)="producto=item;" tooltip="Ver Producto">
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </table>


            <table class="table table-condensed">
              <thead>
                <tr>
                  <th class="">Producto</th>
                  <th class="">Descripción</th>
                  <th class="">cantidad</th>
                  <th class="">precio</th>
                  <th class="">tipo impuesto</th>
                  <th class="">importe</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="">001</td>
                  <td class="">Doe moe</td>
                  <td class="">12.00</td>
                  <td class="">100.00</td>
                  <td class="">Reducido 7%</td>
                  <td class="">1200.00</td>
                </tr>
                <tr>
                  <td class="">002</td>
                  <td class="">Doe moe TURURU</td>
                  <td class="">10.00</td>
                  <td class="">1000.00</td>
                  <td class="">Normal 18%</td>
                  <td class="">10000.00</td>
                </tr>
              </tbody>
            </table>
          </div> <!-- panel body -->
          <div class="panel-footer">Piefactura
          </div>
        </div> <!-- panel -->
      </div> <!-- col -->
    </div> <!-- row -->
  </div> <!-- container -->


  <div class="modal fade" id="productosModal" tabindex="-1" role="dialog" aria-labelledby="productosModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="productosModalLabel">Seleccione un producto</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">

            <div class="input-group col-sm-12">
                <div class="input-group-addon"><i class="fa fa-search"></i></div>
                <input class="form-control form-control-lg form-control-borderless" type="search"
                  [ngModelOptions]="{standalone: true}" [(ngModel)]="Search"
                  placeholder="Buscar por nombre o precio">
              </div>

              <br>


          <div class="row justify-content-center">
            <div class="col-sm-12">
              <table class="table table-responsive" *ngIf="productos.length > 0; else noDBProductos">
                <table class="table table-striped table-bordered" [mfData]="productos | search : Search : productos[0]"
                  #mf="mfDataTable" cellspacing="0" width="100%">
                  <thead>
                    <tr>
                      <th class="text-center" scope="col">#</th>
                      <th class="text-center" scope="col">Nombre</th>
                      <th class="text-center" scope="col">Precio</th>
                      <th class="text-center" scope="col">Seleccionar</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of mf.data; let i = index">
                      <th class="text-center" scope="row">{{ i+1 }}</th>
                      <td class="text-center">{{item.nombre }}</td>
                      <td class="text-center">{{item.precio }}</td>
                      <td class="text-center">
                        <button type="button" data-dismiss="modal" class="btn btn-secondary fa fa-plus-square" data-toggle="modal"
                          (click)="producto=item;" tooltip="Ver Producto">
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </table>
            </div>
           
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- modal seleccionar cliente-->
  <div class="modal fade"  id="seleccionarClienteLabel" tabindex="-1" role="dialog" aria-labelledby="seleccionarClienteLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Lista de clientes</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
            <div class="row justify-content-center">
                <!--end of col-->
                <div class="input-group col-sm-12">
                  <div class="input-group-addon"><i class="fa fa-search"></i></div>
                  <input class="form-control form-control-lg form-control-borderless" type="search"
                    [ngModelOptions]="{standalone: true}" [(ngModel)]="Search" placeholder="Buscar cliente">
                </div>
              </div>
            <div class="row justify-content-center">
                <div class="col-sm-12">
                  <table class="table table-responsive" *ngIf="client1.length > 0; else noDBPacientes">
                    <table class="table table-striped table-bordered" [mfData]="client1 | search : Search : client1[0]"
                      #mf="mfDataTable" cellspacing="0" width="100%">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th class="th-sm" scope="col">Tipo de documento</th>
                          <th scope="col">Numero de documento</th>
                          <th scope="col">Primer nombre</th>
                          <th scope="col">Primer Apellido</th>
                          <th scope="col">Correo</th>
                          <th scope="col">Acciones</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of mf.data; let i = index">
                          <th scope="row">{{ i+1 }}</th>
                          <td>{{item.identification_type}}</td>
                          <td>{{item.identification_number}}</td>
                          <td>{{item.first_name}}</td>
                          <td>{{item.surname}}</td>
                          <td>{{item.email}}</td>
                          <td class="text-center">
                            <button type="button" data-dismiss="modal" class="fa fa-plus-square" aria-label="Close" (click)="clientSeleccionado=item">
                            </button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </table>

                  <!-- pager -->

                  <nav aria-label="Page navigation example">
                    <ul *ngIf="pager.pages && pager.pages.length" class="pagination justify-content-center">
                      <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                        <a class="page-link" (click)="setPage(1)"><i class="mdi mdi-chevron-double-left"></i></a>
                      </li>
                      <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                        <a class="page-link" (click)="setPage(pager.currentPage - 1)"><i class="mdi mdi-chevron-left"></i></a>
                      </li>
                      <li class="page-item" *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                        <a class="page-link" (click)="setPage(page)">{{page}}</a>
                      </li>
                      <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                        <a class="page-link" (click)="setPage(pager.currentPage + 1)"><i class="mdi mdi-chevron-right"></i></a>
                      </li>
                      <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                        <a class="page-link" (click)="setPage(pager.totalPages)"><i
                            class="mdi mdi-chevron-double-right"></i></a>
                      </li>
                    </ul>
                  </nav>

                </div>
                <ng-template #noDBPacientes>
                  <div>
                    <br>
                    <h3 style="text-align:center;">No hay clientes registrados en el sistema</h3>
                  </div>
                </ng-template>

              </div>
        </div>
      </div>
    </div>
  </div>
